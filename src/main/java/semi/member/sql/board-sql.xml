<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>board-sql.xml</comment>

	<!-- 전체 게시글 수 조회 -->
	<entry key="getListCount">
		SELECT COUNT(*) FROM COMMUNITY
		WHERE COMMUNITY_FL = 'N'
	</entry>
	
	
	<!-- 게시판 일정한 범위 조회 -->
	<entry key="selectBoardList">
	SELECT * FROM(
		   SELECT ROWNUM RNUM, A.* FROM(
		      SELECT COMMUNITY_AREA, COMMUNITY_NO, COMMUNITY_NM, CATEGORY_NM, 
				(SELECT COUNT(*) FROM PICK WHERE COMMUNITY.COMMUNITY_NO = PICK.COMMUNITY_NO) PICK, 
				(SELECT COUNT(*) FROM COMMUNITY_MEMBER WHERE COMMUNITY.COMMUNITY_NO = COMMUNITY_MEMBER.COMMUNITY_NO) COMMUNITY_MEMBER
			  FROM COMMUNITY
			  JOIN CATEGORY USING(CATEGORY_NO)
			  WHERE COMMUNITY_FL = 'N'
		      ORDER BY COMMUNITY_NO DESC
		   ) A
		)
	WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 조건을 만족하는 게시글 수 조회 -->
	<entry key="searchListCount">
		SELECT COUNT(*) FROM COMMUNITY
		WHERE COMMUNITY_FL = 'N'
	</entry>
	
	<!-- 조건을 만족하는 게시글 목록 조회 -->
	<entry key="searchBoardList1">
	SELECT * FROM(
		   SELECT ROWNUM RNUM, A.* FROM(
		      SELECT COMMUNITY_AREA, COMMUNITY_NO, COMMUNITY_NM, CATEGORY_NM, COMMUNITY_IMG,
				(SELECT COUNT(*) FROM PICK WHERE COMMUNITY.COMMUNITY_NO = PICK.COMMUNITY_NO) PICK, 
				(SELECT COUNT(*) FROM COMMUNITY_MEMBER WHERE COMMUNITY.COMMUNITY_NO = COMMUNITY_MEMBER.COMMUNITY_NO) COMMUNITY_MEMBER
			  FROM COMMUNITY
			  JOIN CATEGORY USING(CATEGORY_NO)
			  WHERE COMMUNITY_FL = 'N'
			 
		      
	</entry>
	
	<entry key="searchBoardList2">
				ORDER BY COMMUNITY_NO DESC
			   ) A
			)
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 카테고리명 조회 -->
	<entry key="selectCategoryName">
		SELECT CATEGORY_NM FROM CATEGORY
		WHERE CATEGORY_NO = ?
	</entry>
	
	<!-- 카테고리별 게시글 수 조회 -->
	<entry key="getCategoryListCount">
		SELECT COUNT(*) FROM COMMUNITY
		WHERE COMMUNITY_FL = 'N'
		AND CATEGORY_NO = ?
	</entry>
	
	<entry key="SearchCategoryListCount">
		SELECT COUNT(*) FROM COMMUNITY
		WHERE COMMUNITY_FL = 'N'
		AND CATEGORY_NO = ?
	</entry>
	
	<!-- 카테고리별 목록 조회 -->
	<entry key="selectCategoryList">
		SELECT * FROM(
		   SELECT ROWNUM RNUM, A.* FROM(
		      SELECT COMMUNITY_AREA, COMMUNITY_NO, COMMUNITY_NM, CATEGORY_NM, COMMUNITY_IMG,
				(SELECT COUNT(*) FROM PICK WHERE COMMUNITY.COMMUNITY_NO = PICK.COMMUNITY_NO) PICK, 
				(SELECT COUNT(*) FROM COMMUNITY_MEMBER WHERE COMMUNITY.COMMUNITY_NO = COMMUNITY_MEMBER.COMMUNITY_NO) COMMUNITY_MEMBER
			  FROM COMMUNITY
			  JOIN CATEGORY USING(CATEGORY_NO)
			  WHERE COMMUNITY_FL = 'N'
			  AND CATEGORY_NO = ?
		      ORDER BY COMMUNITY_NO DESC
		   ) A
		)
	WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	<!-- 조건을 만족하는 글 목록 -->
	<entry key="searchCategoryList1">
	SELECT * FROM(
		   SELECT ROWNUM RNUM, A.* FROM(
		      SELECT COMMUNITY_AREA, COMMUNITY_NO, COMMUNITY_NM, CATEGORY_NM, COMMUNITY_IMG,
				(SELECT COUNT(*) FROM PICK WHERE COMMUNITY.COMMUNITY_NO = PICK.COMMUNITY_NO) PICK, 
				(SELECT COUNT(*) FROM COMMUNITY_MEMBER WHERE COMMUNITY.COMMUNITY_NO = COMMUNITY_MEMBER.COMMUNITY_NO) COMMUNITY_MEMBER
			  FROM COMMUNITY
			  JOIN CATEGORY USING(CATEGORY_NO)
			  WHERE COMMUNITY_FL = 'N'
			  AND CATEGORY_NO = ?
			 
		      
	</entry>
	
	<entry key="searchCategoryList2">
			ORDER BY COMMUNITY_NO DESC
				   ) A
				)
			WHERE RNUM BETWEEN ? AND ?
	</entry>
	
	
</properties>
